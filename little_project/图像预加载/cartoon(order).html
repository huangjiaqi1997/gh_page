<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>漫画预加载</title>
	<style>
		.box{
			text-align: center;
		}
		.btn{
			display: inline-block;
			height: 30px;
			line-height: 30px;
			border: 1px solid #ccc;
			background: #fff;
			color: #333;
			padding: 0 10px;
			margin-right: 50px;

		}
		a{
			text-decoration: none;
		}
		.btn{
			background: #eee;
		}
	</style>
</head>
<body>
	<div class="box">
		<img src="img/imgs/1.jpg" alt="pic" id="img" width="1200">
		<p>
			<a href="javascript:;" class="btn" data-control="prev">上一页</a>
			<a href="javascript:;" class="btn" data-control="next">下一页</a>
		</p>
	</div>
<script src="../../jquery-3.2.1.js"></script>
<script src="preload.js"></script>
<script>
	var imgs = [
		'img/imgs/1.jpg',
		'img/imgs/2.jpg',
		'img/imgs/3.jpg',
		'img/imgs/4.jpg',
		'img/imgs/5.jpg',
		'img/imgs/6.jpg',
		'img/imgs/7.jpg',
		'img/imgs/8.jpg',
		'img/imgs/9.jpg',
		'img/imgs/10.jpg'
	];
	var len = imgs.length,
		index = 0;

	$.preload(imgs, {
		order: 'order'
	});

	/*load();
	//有序预加载
	function load() {
		var imgObj = new Image(); //

		$(imgObj).on('load error', function () { //
			if (count >= len) {
				//所有加载完毕
			} else {
				load(); //回调
			}

			count++;
		});

		imgObj.src = imgs[count]; //
	}*/

	$('.btn').on('click', function () {
		if ($(this).data('control') === 'prev') {
			index = Math.max(0, --index);
		} else {
			index = Math.min(len - 1, ++index);
		}

		document.title = (index + 1) + '/' + len;
		$('#img').attr('src', imgs[index]);
	});
</script>
</body>
</html>